drop table IF EXISTS users CASCADE;
drop table IF EXISTS request CASCADE;
drop table IF EXISTS item CASCADE;
drop table IF EXISTS booking CASCADE;

create TABLE IF NOT EXISTS users (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
  name VARCHAR(40),
  email VARCHAR(40) UNIQUE
);
create TABLE IF NOT EXISTS request (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    description VARCHAR(50),
    requestor_id INTEGER REFERENCES users (id) ON delete CASCADE,
    created DATE
    );
create TABLE IF NOT EXISTS item (
  id INTEGER GENERATED BY DEFAULT AS IDENTITY NOT NULL PRIMARY KEY,
  name VARCHAR(40) NOT NULL,
  description VARCHAR(255) NOT NULL,
  available BOOLEAN NOT NULL,
  owner_id INTEGER REFERENCES users (id) ON DELETE CASCADE,
  request_id INTEGER REFERENCES request (id) ON DELETE CASCADE
  );
create TABLE IF NOT EXISTS booking (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    start_date TIMESTAMP WITHOUT TIME ZONE,
    end_date TIMESTAMP WITHOUT TIME ZONE,
    status VARCHAR(30),
    item_id INTEGER REFERENCES item (id) ON delete CASCADE,
    booker_id INTEGER REFERENCES users (id) ON delete CASCADE
);

create TABLE IF NOT EXISTS comment (
    id INTEGER GENERATED BY DEFAULT AS IDENTITY PRIMARY KEY,
    text VARCHAR(200),
    created TIMESTAMP WITHOUT TIME ZONE,
    item_id INTEGER REFERENCES item (id) ON delete CASCADE,
    user_id INTEGER REFERENCES users (id) ON delete CASCADE
);
